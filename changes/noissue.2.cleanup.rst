Test: Improved end2end testcases in test_session.py by adding testcases and
cleaning up the test function code.
